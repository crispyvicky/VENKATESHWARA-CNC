(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{892:function(e,t,a){Promise.resolve().then(a.bind(a,5090))},2381:function(e,t,a){"use strict";a.d(t,{Button:function(){return o},d:function(){return d}});var l=a(7437),s=a(2265),n=a(7495),r=a(535),i=a(3448);let d=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-premium hover:shadow-premium-lg hover:-translate-y-1",golden:"gradient-golden text-primary shadow-golden hover:shadow-golden-lg hover:-translate-y-1 hover:scale-105",outline:"border-2 border-secondary bg-transparent text-secondary hover:bg-secondary/10 hover:border-accent hover:text-accent hover:-translate-y-0.5",ghost:"text-secondary hover:text-accent hover:bg-accent/10",link:"text-secondary underline-offset-4 hover:text-accent hover:underline",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80"},size:{default:"h-12 px-8 py-3",sm:"h-10 px-6 py-2 text-sm",lg:"h-14 px-12 py-4 text-base",xl:"h-16 px-14 py-5 text-lg",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:r,asChild:o=!1,...c}=e,x=o?n.g7:"button";return(0,l.jsx)(x,{className:(0,i.cn)(d({variant:s,size:r,className:a})),ref:t,...c})});o.displayName="Button"},279:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var l=a(7437),s=a(2265),n=a(3448);let r=s.forwardRef((e,t)=>{let{className:a,type:s,...r}=e;return(0,l.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});r.displayName="Input"},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var l=a(1994),s=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,l.W)(t))}},5090:function(e,t,a){"use strict";a.d(t,{default:function(){return M}});var l=a(7437),s=a(2265),n=a(605),r=a(5466),i=a(5805),d=a(4794),o=a(6475),c=a(8728),x=a(6275),u=a(2369),m=a(3113),h=a(2381),p=a(279),b=a(5252),f=a(7586);let g=[{id:"dashboard",label:"Dashboard",icon:r.Z},{id:"orders",label:"Orders & Quotes",icon:x.Z},{id:"clients",label:"Clients",icon:i.Z},{id:"projects",label:"Projects",icon:o.Z},{id:"payments",label:"Payments",icon:b.Z},{id:"services",label:"Services",icon:f.Z},{id:"settings",label:"Settings",icon:c.Z},{id:"gallery",label:"Gallery Manager",icon:m.Z}];function v(e){let{activeTab:t,setActiveTab:a}=e;return(0,l.jsxs)("aside",{className:"w-[230px] bg-[#251e14] text-[#FFD180] border-r border-walnut/30 flex flex-col min-h-screen shadow-2xl",children:[(0,l.jsxs)("div",{className:"p-6 border-b border-walnut/30 flex gap-3 items-center",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-lg bg-golden-teak flex items-center justify-center",children:(0,l.jsx)(r.Z,{className:"w-6 h-6 text-[#704214]"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"font-bold text-lg text-golden-teak",children:"Venkateshwara CNC"}),(0,l.jsx)("span",{className:"text-xs text-gold-leaf/60",children:"Admin Portal"})]})]}),(0,l.jsx)("nav",{className:"flex-1 py-8 px-3",children:(0,l.jsx)("ul",{className:"space-y-2",children:g.map(e=>(0,l.jsxs)("li",{className:"relative",children:[t===e.id&&(0,l.jsx)("span",{className:"absolute left-0 top-0 h-full w-2 bg-gradient-to-b from-golden-teak to-walnut rounded-r-md"}),(0,l.jsxs)("button",{className:"group w-full flex items-center gap-4 pl-6 pr-4 py-3 rounded-lg transition-all font-semibold text-left outline-none\n                  ".concat(t===e.id?"bg-gradient-to-r from-golden-teak to-walnut text-[#3a2208] shadow-lg border-l-4 border-golden-teak":"text-gold-leaf hover:bg-gold-leaf/10 hover:text-gold-leaf","\n                  focus-visible:ring-2 focus-visible:ring-golden-teak focus-visible:ring-offset-2 focus-visible:bg-gold-leaf/5\n                "),"aria-current":t===e.id?"page":void 0,onClick:()=>a(e.id),tabIndex:0,children:[(0,l.jsx)(e.icon,{className:"w-6 h-6 ".concat(t===e.id?"text-[#5c3303]":"text-gold-leaf group-hover:text-[#FFD180]")}),(0,l.jsx)("span",{className:"text-base",children:e.label})]})]},e.id))})})]})}var j=a(2451),y=a(407),N=a(4309),w=a(3448);function S(e){let{className:t,classNames:a,showOutsideDays:s=!0,...n}=e;return(0,l.jsx)(N._W,{showOutsideDays:s,className:(0,w.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,w.cn)((0,h.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,w.cn)((0,h.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,l.jsx)(j.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,l.jsx)(y.Z,{className:"h-4 w-4"})}},...n})}S.displayName="Calendar";var C=a(4438),k=a(3929);let A=k.fC,_=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(k.aV,{ref:t,className:(0,w.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});_.displayName=k.aV.displayName;let D=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(k.xz,{ref:t,className:(0,w.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",a),...s})});D.displayName=k.xz.displayName;let I=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(k.VY,{ref:t,className:(0,w.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});function P(e){let{open:t,onClose:a,client:n,onSaved:r}=e,i=["CNC Cutting & Carving","CNC Engraving","Custom Wood Design","Temple Door","Portrait","Decorative Jali & Grills","Wall Art","Furniture Crafting"],[d,o]=(0,s.useState)(""),[c,x]=(0,s.useState)(i[0]),[u,m]=(0,s.useState)(""),[b,f]=(0,s.useState)(""),[g,v]=(0,s.useState)("1"),[j,y]=(0,s.useState)("0"),[N,w]=(0,s.useState)("0"),[k,A]=(0,s.useState)(void 0),[_,D]=(0,s.useState)(""),I=()=>parseFloat(b||"0")*parseFloat(g||"1")-parseFloat(j||"0"),P=()=>I()-parseFloat(N||"0"),B=async()=>{if(!d&&!c)return D("Service required");if(!b||isNaN(Number(b)))return D("Valid rate required");let e={customer:n._id,description:u||d||c,rate:parseFloat(b),quantity:parseFloat(g),discount:parseFloat(j),advance:parseFloat(N),total:I(),paid:parseFloat(N),balance:P(),deliveryDate:k,status:"pending"},t=await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(r(await t.json()),C.Am.success("Job/Quote created!"),a()):D("Failed to create job.")};return t?(0,l.jsx)("div",{className:"fixed z-50 inset-0 flex items-center justify-center bg-black/40",children:(0,l.jsxs)("div",{className:"bg-walnut/90 text-gold-leaf shadow-2xl rounded-2xl border border-walnut/40",children:[(0,l.jsx)("button",{onClick:a,className:"absolute top-2 right-3 text-2xl",children:"\xd7"}),(0,l.jsxs)("h3",{className:"text-xl font-bold mb-3 text-walnut",children:["Add Job / Quote for ",n.name]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-walnut mb-1",children:"Service"}),(0,l.jsxs)("select",{className:"w-full h-12 px-4 rounded border",value:c,onChange:e=>x(e.target.value),children:[i.map(e=>(0,l.jsx)("option",{value:e,children:e},e)),(0,l.jsx)("option",{value:"__custom",children:"Other (enter below)"})]}),"__custom"===c&&(0,l.jsx)(p.I,{className:"mt-2",placeholder:"Custom service",value:d,onChange:e=>o(e.target.value)})]}),(0,l.jsx)("div",{children:(0,l.jsx)(p.I,{placeholder:"Description (optional)",value:u,onChange:e=>m(e.target.value)})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(p.I,{className:"w-1/2",type:"number",placeholder:"Rate",value:b,onChange:e=>f(e.target.value)}),(0,l.jsx)(p.I,{className:"w-1/2",type:"number",placeholder:"Quantity",value:g,onChange:e=>v(e.target.value)})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(p.I,{className:"w-1/2",type:"number",placeholder:"Advance",value:N,onChange:e=>w(e.target.value)}),(0,l.jsx)(p.I,{className:"w-1/2",type:"number",placeholder:"Discount",value:j,onChange:e=>y(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1 text-walnut",children:"Expected Delivery Date (optional):"}),(0,l.jsx)(S,{selected:k,onSelect:A})]}),(0,l.jsxs)("div",{className:"text-sandalwood text-sm",children:["Total: ₹",I()," | Balance: ₹",P()]}),_&&(0,l.jsx)("div",{className:"text-red-600 text-sm",children:_}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4 justify-end",children:[(0,l.jsx)(h.Button,{variant:"outline",onClick:a,type:"button",children:"Cancel"}),(0,l.jsx)(h.Button,{variant:"golden",type:"button",onClick:B,children:"Add Job / Quote"})]})]})]})}):null}function B(e){let{open:t,onClose:a,onSave:n,initial:r}=e,[i,d]=(0,s.useState)((null==r?void 0:r.name)||""),[o,c]=(0,s.useState)((null==r?void 0:r.phone)||""),[x,u]=(0,s.useState)((null==r?void 0:r.email)||""),[m,b]=(0,s.useState)((null==r?void 0:r.deliveryDate)?new Date(r.deliveryDate):void 0),[f,g]=(0,s.useState)("");return(0,s.useEffect)(()=>{t&&(d((null==r?void 0:r.name)||""),c((null==r?void 0:r.phone)||""),u((null==r?void 0:r.email)||""),b((null==r?void 0:r.deliveryDate)?new Date(r.deliveryDate):void 0),g(""))},[t,r]),t?(0,l.jsx)("div",{className:"fixed z-50 inset-0 flex items-center justify-center bg-black/40",children:(0,l.jsxs)("div",{className:"bg-walnut/90 text-gold-leaf shadow-2xl rounded-2xl border border-walnut/40",children:[(0,l.jsx)("button",{onClick:a,className:"absolute top-2 right-3 text-2xl",children:"\xd7"}),(0,l.jsx)("h3",{className:"text-xl font-bold mb-3 text-walnut",children:r?"Edit Client":"Add Client"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)(p.I,{placeholder:"Full Name",value:i,onChange:e=>d(e.target.value),required:!0})}),(0,l.jsx)("div",{children:(0,l.jsx)(p.I,{placeholder:"Phone",value:o,onChange:e=>c(e.target.value)})}),(0,l.jsx)("div",{children:(0,l.jsx)(p.I,{placeholder:"Email",value:x,onChange:e=>u(e.target.value)})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1 text-walnut",children:"Expected Delivery Date (optional):"}),(0,l.jsx)(S,{selected:m,onSelect:b})]}),f&&(0,l.jsx)("div",{className:"text-red-600 text-sm",children:f}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4 justify-end",children:[(0,l.jsx)(h.Button,{variant:"outline",onClick:a,type:"button",children:"Cancel"}),(0,l.jsx)(h.Button,{variant:"golden",type:"button",onClick:()=>{if(!i)return g("Name required");n({name:i,phone:o,email:x,deliveryDate:m})},children:r?"Save Changes":"Add Client"})]})]})]})}):null}function O(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)(void 0),[d,o]=(0,s.useState)(""),[c,x]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{fetch("/api/customers").then(e=>e.json()).then(e=>t(e))},[]);let b=d?e.filter(e=>{var t,a;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null===(a=e.phone)||void 0===a?void 0:a.includes(d))}):e,f=e=>{i(e),n(!0)},g=async e=>{if(n(!1),r&&r._id)(await fetch("/api/customers/".concat(r._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&t(t=>t.map(t=>t._id===r._id?{...t,...e}:t));else{let a=await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){let e=await a.json();t(t=>[e,...t])}}};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-walnut",children:"Manage Clients"}),(0,l.jsx)(h.Button,{variant:"golden",onClick:()=>f(),children:"+ Add Client"})]}),(0,l.jsx)("div",{className:"mb-3 max-w-xs",children:(0,l.jsx)(p.I,{placeholder:"Search by name or phone",value:d,onChange:e=>o(e.target.value)})}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-lg border bg-card",children:(0,l.jsxs)("table",{className:"min-w-full text-left divide-y divide-walnut/30 even:bg-walnut/10 odd:bg-walnut/5",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-walnut/80 text-golden-teak",children:[(0,l.jsx)("th",{className:"py-2 px-3",children:"Name"}),(0,l.jsx)("th",{className:"py-2 px-3",children:"Phone"}),(0,l.jsx)("th",{className:"py-2 px-3",children:"Email"}),(0,l.jsx)("th",{className:"py-2 px-3",children:"Created"}),(0,l.jsx)("th",{className:"py-2 px-3",children:"Delivery"}),(0,l.jsx)("th",{className:"py-2 px-3 text-center",children:"Action"})]})}),(0,l.jsxs)("tbody",{children:[b.map(e=>(0,l.jsxs)("tr",{className:"border-t last:border-b hover:bg-golden-teak/10",children:[(0,l.jsx)("td",{className:"px-3 py-2",children:e.name}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.phone}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.email}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.deliveryDate?new Date(e.deliveryDate).toLocaleDateString():(0,l.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,l.jsxs)("td",{className:"px-3 py-2 text-center",children:[(0,l.jsx)(h.Button,{size:"sm",variant:"outline",onClick:()=>f(e),children:"Edit"}),(0,l.jsx)(h.Button,{size:"sm",variant:"golden",className:"ml-2",onClick:()=>{m(e),x(!0)},children:"New Job / Quote"})]})]},e._id)),0===b.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"text-muted-foreground p-6 text-center",children:"No clients found."})})]})]})}),(0,l.jsx)(B,{open:a,onClose:()=>n(!1),onSave:g,initial:r}),(0,l.jsx)(P,{open:c,onClose:()=>x(!1),client:u,onSaved:()=>{}})]})}function E(e){let{open:t,onClose:a,job:n,onSaved:r}=e,[i,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(new Date),[x,u]=(0,s.useState)(""),m=async()=>{if(!i||isNaN(Number(i)))return u("Valid payment required");(await fetch("/api/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:n.customer._id,job:n._id,amount:parseFloat(i),date:o})})).ok?(r(),a(),C.Am.success("Payment recorded.")):u("Failed to add payment.")};return t?(0,l.jsx)("div",{className:"fixed z-50 inset-0 flex items-center justify-center bg-black/50",children:(0,l.jsxs)("div",{className:"bg-walnut/90 text-gold-leaf shadow-2xl rounded-2xl border border-walnut/40",children:[(0,l.jsx)("button",{onClick:a,className:"absolute top-2 right-3 text-2xl",children:"\xd7"}),(0,l.jsx)("h3",{className:"text-xl font-bold mb-3 text-walnut",children:"Record Payment"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(p.I,{placeholder:"Amount",type:"number",value:i,onChange:e=>d(e.target.value)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm mb-1 text-walnut",children:"Date:"}),(0,l.jsx)(S,{selected:o,onSelect:c})]}),x&&(0,l.jsx)("div",{className:"text-red-600 text-sm",children:x}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4 justify-end",children:[(0,l.jsx)(h.Button,{variant:"outline",onClick:a,children:"Cancel"}),(0,l.jsx)(h.Button,{variant:"golden",onClick:m,children:"Add Payment"})]})]})]})}):null}function T(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[d,o]=(0,s.useState)(!1),[c,x]=(0,s.useState)(null),u=()=>fetch("/api/jobs").then(async e=>{let t=await e.text();if(!t)return[];try{return JSON.parse(t)}catch(e){return[]}}).then(t);(0,s.useEffect)(()=>{u()},[]);let m=async t=>{await u();let a=e.find(e=>e._id===t._id);a&&a.paid>=a.total&&"completed"!==a.status&&(await fetch("/api/jobs/".concat(a._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})}),await u(),C.Am.success("Job marked as completed!"))},b=e.filter(e=>{var t;return(!a||((null===(t=e.customer)||void 0===t?void 0:t.name)||"").toLowerCase().includes(a.toLowerCase()))&&(!r||e.status===r)}),f=async e=>{try{let t=await fetch("/api/invoices?job=".concat(e._id)),a=null;if(t.ok){let e=await t.json();Array.isArray(e)&&e.length>0&&(a=e[0])}if(!a){if((t=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:e.customer._id,jobs:[e._id],subtotal:e.total,discount:e.discount||0,total:e.total-(e.discount||0),paid:e.paid,balance:e.balance,number:"INV-".concat(new Date().getFullYear(),"-").concat(Math.floor(1e4*Math.random()))})})).ok)a=await t.json();else throw Error("Failed to create invoice.")}a&&a._id?(window.open("/api/invoices/".concat(a._id,"/pdf"),"_blank"),C.Am.success("Invoice ready!")):C.Am.error("Something went wrong generating invoice.")}catch(e){C.Am.error("Error generating invoice.")}};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-extrabold text-golden-teak mb-2 border-b-4 border-golden-teak pb-2 w-full pl-1",children:"Orders & Quotes"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(p.I,{placeholder:"Search client",value:a,onChange:e=>n(e.target.value)}),(0,l.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"rounded border h-10 px-3 ml-2",children:[(0,l.jsx)("option",{value:"",children:"Status"}),(0,l.jsx)("option",{value:"pending",children:"Pending"}),(0,l.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,l.jsx)("option",{value:"completed",children:"Completed"})]})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-2xl shadow-xl border-none bg-[#fff8e1] w-full mt-2 mb-6",children:(0,l.jsxs)("table",{className:"min-w-full text-left ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-[#fcdf9b] border-b-2 border-golden-teak text-[#442609] text-lg font-bold",children:[(0,l.jsx)("th",{className:"py-4 px-4",children:"Service"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Client"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Dates"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Total"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Paid"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Balance"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Status"}),(0,l.jsx)("th",{className:"py-4 px-4 text-center",children:"Actions"})]})}),(0,l.jsxs)("tbody",{children:[b.map((e,t)=>{var a;return(0,l.jsxs)("tr",{className:t%2==0?"bg-[#fff8e1] text-[#1a1204]":"bg-[#f8e3b0] text-[#1a1204] border-t border-gold-leaf/30 hover:bg-gold-leaf/10 transition",children:[(0,l.jsx)("td",{className:"px-4 py-3 font-medium",children:e.description}),(0,l.jsx)("td",{className:"px-4 py-3",children:null===(a=e.customer)||void 0===a?void 0:a.name}),(0,l.jsxs)("td",{className:"px-4 py-3",children:[e.createdAt?new Date(e.createdAt).toLocaleDateString():"-",(0,l.jsx)("br",{}),e.deliveryDate?"→ "+new Date(e.deliveryDate).toLocaleDateString():""]}),(0,l.jsxs)("td",{className:"px-4 py-3 font-bold",children:["₹",e.total]}),(0,l.jsxs)("td",{className:"px-4 py-3",children:["₹",e.paid]}),(0,l.jsxs)("td",{className:"px-4 py-3",children:["₹",e.balance]}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold ".concat("completed"===e.status?"bg-green-200 text-green-900":"pending"===e.status?"bg-yellow-100 text-yellow-900":"bg-blue-100 text-blue-900"),children:e.status})}),(0,l.jsxs)("td",{className:"px-4 py-3 text-center",children:[(0,l.jsx)(h.Button,{size:"lg",variant:"golden",className:"bg-gradient-to-r from-gold-leaf to-golden-teak text-[#312106] font-bold shadow-lg px-6 py-2 rounded-xl border-2 border-golden-teak hover:from-golden-teak hover:to-gold-leaf transition",onClick:()=>{x(e),o(!0)},children:"Add Payment"}),"completed"===e.status?(0,l.jsx)(h.Button,{size:"lg",variant:"golden",className:"ml-3 px-4 py-2 font-bold shadow border-golden-teak",onClick:()=>f(e),children:"Invoice"}):null]})]},e._id)}),0===b.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:8,className:"text-muted-foreground p-6 text-center",children:"No jobs found."})})]})]})}),(0,l.jsx)(E,{open:d,onClose:()=>o(!1),job:c,onSaved:()=>m(c)})]})}function F(e){var t,a;let{open:s,onClose:n,job:r,generateOrOpenInvoice:i}=e;return s&&r?(0,l.jsx)("div",{className:"fixed z-50 inset-0 flex items-center justify-center bg-black/40",children:(0,l.jsxs)("div",{className:"relative bg-[#fff8e1] text-[#312106] shadow-2xl rounded-2xl border-2 border-golden-teak px-10 py-8 min-w-[360px] max-w-full w-[90vw] md:w-[520px] animate-fadeIn",children:[(0,l.jsx)("button",{"aria-label":"Close",onClick:n,className:"absolute top-5 right-5 text-3xl text-golden-teak hover:text-red-500 transition-colors bg-transparent p-1.5 rounded-full focus:outline-none focus:ring-2 focus:ring-gold-leaf/40",children:"\xd7"}),(0,l.jsx)("h3",{className:"text-2xl font-bold mb-4 text-golden-teak border-b-2 border-golden-teak pb-2",children:"Job Details"}),(0,l.jsxs)("div",{className:"mb-1",children:[(0,l.jsx)("span",{className:"font-bold text-walnut",children:"Client:"})," ",null===(t=r.customer)||void 0===t?void 0:t.name," (",(null===(a=r.customer)||void 0===a?void 0:a.phone)||"No phone",")"]}),(0,l.jsxs)("div",{className:"mb-1 text-base",children:["Created: ",r.createdAt?new Date(r.createdAt).toLocaleDateString():"-"," \xa0|\xa0 Delivery: ",r.deliveryDate?new Date(r.deliveryDate).toLocaleDateString():"-"]}),(0,l.jsxs)("div",{className:"mb-1",children:[(0,l.jsx)("span",{className:"font-bold",children:"Service:"})," ",r.description]}),(0,l.jsxs)("div",{className:"mb-1",children:["Rate: ",(0,l.jsxs)("b",{children:["₹",r.rate]}),", Qty: ",(0,l.jsx)("b",{children:r.quantity}),", Discount: ",(0,l.jsxs)("b",{children:["₹",r.discount]}),", Advance: ",(0,l.jsxs)("b",{children:["₹",r.advance]})]}),(0,l.jsxs)("div",{className:"mb-2",children:["Paid: ",(0,l.jsxs)("b",{children:["₹",r.paid]}),", Balance: ",(0,l.jsxs)("b",{children:["₹",r.balance]}),", \xa0 ",(0,l.jsx)("span",{className:"font-bold",children:"Status:"})," ",(0,l.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold ml-1 ".concat("completed"===r.status?"bg-green-200 text-green-900":"pending"===r.status?"bg-yellow-100 text-yellow-900":"bg-blue-100 text-blue-900"),children:r.status})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:["completed"===r.status&&(0,l.jsx)(h.Button,{variant:"golden",className:"flex-1",onClick:()=>i(r),children:"Generate/View Invoice"}),(0,l.jsx)(h.Button,{variant:"outline",onClick:n,className:"flex-1",children:"Close"})]})]})}):null}function J(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(null);(0,s.useEffect)(()=>{fetch("/api/jobs").then(e=>e.json()).then(t)},[]);let d=e.filter(e=>{var t;return!a||((null===(t=e.customer)||void 0===t?void 0:t.name)||"").toLowerCase().includes(a.toLowerCase())}),o=async e=>{try{let t=await fetch("/api/invoices?job=".concat(e._id)),a=null;if(t.ok){let e=await t.json();Array.isArray(e)&&e.length>0&&(a=e[0])}if(!a){if((t=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:e.customer._id,jobs:[e._id],subtotal:e.total,discount:e.discount||0,total:e.total-(e.discount||0),paid:e.paid,balance:e.balance,number:"INV-".concat(new Date().getFullYear(),"-").concat(Math.floor(1e4*Math.random()))})})).ok)a=await t.json();else throw Error("Failed to create invoice.")}a&&a._id?(window.open("/api/invoices/".concat(a._id,"/pdf"),"_blank"),C.Am.success("Invoice ready!")):C.Am.error("Something went wrong generating invoice.")}catch(e){C.Am.error("Error generating invoice.")}};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-extrabold text-golden-teak mb-2 border-b-4 border-golden-teak pb-2 w-full pl-1",children:"All Projects / Jobs"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(p.I,{placeholder:"Search client/job",value:a,onChange:e=>n(e.target.value)}),(0,l.jsx)(h.Button,{variant:"outline",onClick:()=>{window.open("/api/export/jobs","_blank")},children:"Export CSV"})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-2xl border-none bg-[#fff8e1] w-full mt-2 mb-6",children:(0,l.jsxs)("table",{className:"min-w-full text-left ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-[#fcdf9b] border-b-2 border-golden-teak text-[#442609] text-lg font-bold",children:[(0,l.jsx)("th",{className:"py-4 px-4",children:"Job"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Client"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Created"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Total"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Paid"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Balance"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Status"}),(0,l.jsx)("th",{className:"py-4 px-4 text-center",children:"Action"})]})}),(0,l.jsxs)("tbody",{children:[d.map(e=>{var t;return(0,l.jsxs)("tr",{className:"even:bg-[#fff8e1] odd:bg-[#f8e3b0] text-[#1a1204] border-t border-gold-leaf/30 hover:bg-gold-leaf/10 transition",children:[(0,l.jsx)("td",{className:"px-4 py-3 font-medium",children:e.description}),(0,l.jsx)("td",{className:"px-4 py-3",children:null===(t=e.customer)||void 0===t?void 0:t.name}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"}),(0,l.jsxs)("td",{className:"px-4 py-3",children:["₹",e.total]}),(0,l.jsxs)("td",{className:"px-4 py-3",children:["₹",e.paid]}),(0,l.jsxs)("td",{className:"px-4 py-3",children:["₹",e.balance]}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold ".concat("completed"===e.status?"bg-green-200 text-green-900":"pending"===e.status?"bg-yellow-100 text-yellow-900":"bg-blue-100 text-blue-900"),children:e.status})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:(0,l.jsx)(h.Button,{size:"sm",variant:"outline",onClick:()=>i(e),children:"View"})})]},e._id)}),0===d.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:8,className:"text-muted-foreground p-6 text-center",children:"No jobs found."})})]})]})}),(0,l.jsx)(F,{open:!!r,onClose:()=>i(null),job:r,generateOrOpenInvoice:o})]})}function L(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(-1),[d,o]=(0,s.useState)("");(0,s.useEffect)(()=>{fetch("/api/services").then(e=>e.json()).then(e=>t(e))},[]);let c=async()=>{a&&(await fetch("/api/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})}),t(e=>[a,...e]),n(""))},x=async a=>{await fetch("/api/services",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({old:e[a],name:d})}),t(e=>e.map((e,t)=>t===a?d:e)),i(-1),o("")},u=async a=>{await fetch("/api/services",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e[a]})}),t(e=>e.filter((e,t)=>t!==a))};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-extrabold text-golden-teak mb-2 border-b-4 border-golden-teak pb-2 w-full pl-1",children:"Service Master List"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(p.I,{placeholder:"Add new service",value:a,onChange:e=>n(e.target.value)}),(0,l.jsx)(h.Button,{variant:"golden",onClick:c,children:"Add"})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-2xl border-none bg-[#fff8e1] w-full mt-2 mb-6 max-w-lg",children:(0,l.jsxs)("table",{className:"min-w-full text-left ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-[#fcdf9b] border-b-2 border-golden-teak text-[#442609] text-lg font-bold",children:[(0,l.jsx)("th",{className:"py-4 px-4",children:"Service"}),(0,l.jsx)("th",{className:"py-4 px-4"})]})}),(0,l.jsxs)("tbody",{children:[e.map((e,t)=>(0,l.jsxs)("tr",{className:"even:bg-[#fff8e1] odd:bg-[#f8e3b0] text-[#1a1204] border-t border-gold-leaf/30 hover:bg-gold-leaf/10 transition",children:[(0,l.jsx)("td",{className:"px-4 py-3",children:r===t?(0,l.jsx)(p.I,{value:d,onChange:e=>o(e.target.value)}):e}),(0,l.jsxs)("td",{className:"px-4 py-3 text-right",children:[r===t?(0,l.jsx)(h.Button,{size:"sm",variant:"golden",onClick:()=>x(t),children:"Save"}):(0,l.jsx)(h.Button,{size:"sm",variant:"outline",onClick:()=>{i(t),o(e)},children:"Edit"}),(0,l.jsx)(h.Button,{size:"sm",variant:"outline",className:"ml-2",onClick:()=>u(t),children:"Delete"})]})]},e+t)),0===e.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:2,className:"text-muted-foreground p-6 text-center",children:"No services"})})]})]})})]})}function V(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)("");(0,s.useEffect)(()=>{fetch("/api/payments").then(e=>e.json()).then(e=>t(e))},[]);let r=e.filter(e=>{var t;return!a||(null===(t=e.customer)||void 0===t?void 0:t.name.toLowerCase().includes(a.toLowerCase()))});return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-extrabold text-golden-teak mb-2 border-b-4 border-golden-teak pb-2 w-full pl-1",children:"All Payments"}),(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)(p.I,{placeholder:"Search client/job",value:a,onChange:e=>n(e.target.value)})})]}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-2xl border-none bg-[#fff8e1] w-full mt-2 mb-6",children:(0,l.jsxs)("table",{className:"min-w-full text-left ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-[#fcdf9b] border-b-2 border-golden-teak text-[#442609] text-lg font-bold",children:[(0,l.jsx)("th",{className:"py-4 px-4",children:"Client"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Job/service"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Amount"}),(0,l.jsx)("th",{className:"py-4 px-4",children:"Date"})]})}),(0,l.jsxs)("tbody",{children:[r.map(e=>{var t;return(0,l.jsxs)("tr",{className:"even:bg-[#fff8e1] odd:bg-[#f8e3b0] text-[#1a1204] border-t border-gold-leaf/30 hover:bg-gold-leaf/10 transition",children:[(0,l.jsx)("td",{className:"px-4 py-3 font-medium",children:null===(t=e.customer)||void 0===t?void 0:t.name}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.job&&e.job.description}),(0,l.jsxs)("td",{className:"px-4 py-3",children:["₹",e.amount]}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"})]},e._id)}),0===r.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:4,className:"text-muted-foreground p-6 text-center",children:"No payments"})})]})]})})]})}function Z(){let[e,t]=(0,s.useState)(""),[a,n]=(0,s.useState)("");return(0,s.useEffect)(()=>{fetch("/api/settings").then(e=>e.json()).then(e=>t(e.email))},[]),(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsx)("h2",{className:"text-3xl font-extrabold text-golden-teak mb-2 border-b-4 border-golden-teak pb-2 w-full pl-1",children:"Admin Settings"}),(0,l.jsxs)("form",{className:"space-y-6 mt-6 max-w-xl",onSubmit:e=>{e.preventDefault(),(0,C.Am)("Updating ENV settings via web is restricted. Please update .env.local manually for changes to take effect.")},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 text-walnut",children:"Admin Email"}),(0,l.jsx)(p.I,{value:e,onChange:e=>t(e.target.value),disabled:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 text-walnut",children:"Password"}),(0,l.jsx)(p.I,{value:a,onChange:e=>n(e.target.value),type:"password",placeholder:"(set in .env)",disabled:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 text-walnut",children:"Brand Logo (future)"}),(0,l.jsx)("input",{type:"file",disabled:!0,className:"border p-2 rounded w-full"})]}),(0,l.jsx)(h.Button,{type:"submit",variant:"golden",className:"w-full",children:"Update"})]}),(0,l.jsxs)("div",{className:"text-sm text-muted-foreground mt-3",children:["To update admin credentials or branding, edit ",(0,l.jsx)("b",{children:".env.local"})," and restart your app for security. Signed-in only, always protected."]})]})}function z(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)(null),d=(0,s.useRef)(null),[o,c]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),[m,b]=(0,s.useState)(null),[f,g]=(0,s.useState)(""),[v,j]=(0,s.useState)("");(0,s.useEffect)(()=>{fetch("/api/media/list").then(e=>e.json()).then(t).catch(()=>{})},[]);let y=async()=>{if(!r)return;n(!0);let e=new FormData;e.append("file",r),e.append("title",o),e.append("category",x);try{let a=await fetch("/api/media/upload",{method:"POST",body:e});if(a.ok){let e=await a.json();t(t=>[...t,e]),C.Am.success("Image uploaded!")}else{let e=await a.json();C.Am.error(e.message||"Failed to upload image.")}}catch(e){C.Am.error("An unexpected error occurred.")}finally{i(null),c(""),u(""),n(!1)}};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-between gap-2 mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-extrabold text-golden-teak mb-2 border-b-4 border-golden-teak pb-2 w-full pl-1",children:"Gallery Manager"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(p.I,{placeholder:"Title",value:o,onChange:e=>c(e.target.value)}),(0,l.jsx)(p.I,{placeholder:"Category",value:x,onChange:e=>u(e.target.value)}),(0,l.jsx)(h.Button,{variant:"outline",onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},children:"Choose File"}),(0,l.jsx)("input",{onChange:e=>{var t,a;return i(null!==(a=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==a?a:null)},ref:d,type:"file",className:"hidden"}),r&&(0,l.jsx)("span",{className:"text-sm text-muted-foreground ml-2",children:r.name}),(0,l.jsx)(h.Button,{className:"text-black",variant:"golden",onClick:y,disabled:a||!r,children:"Upload"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full bg-[#fff8e1] rounded-2xl p-6",children:[0===e.length&&(0,l.jsx)("div",{className:"col-span-full text-muted-foreground p-6 text-center",children:"No images"}),e.map(e=>(0,l.jsxs)("div",{className:"rounded-lg overflow-hidden border border-gold-leaf/30 bg-[#f8e3b0] flex flex-col",children:[(0,l.jsx)("img",{src:e.url,alt:e.title,className:"object-cover h-40 w-full"}),(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsx)("div",{className:"font-bold text-walnut text-lg mb-1",children:e.title}),(0,l.jsx)("div",{className:"text-sandalwood text-sm",children:e.category})]})]},e._id))]})]})}function q(){var e;let[t,a]=(0,s.useState)({});return(0,s.useEffect)(()=>{fetch("/api/admin/stats").then(e=>e.json()).then(a)},[]),(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsx)("h2",{className:"text-3xl font-extrabold text-golden-teak mb-2 border-b-4 border-golden-teak pb-2 w-full pl-1",children:"Admin Dashboard"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8 mt-6",children:[(0,l.jsxs)("div",{className:"bg-walnut/60 rounded-xl p-6 shadow flex flex-col items-center",children:[(0,l.jsx)("div",{className:"text-golden-teak text-3xl font-bold",children:null!==(e=t.totalJobs)&&void 0!==e?e:"-"}),(0,l.jsx)("div",{className:"text-sandalwood mt-2",children:"Jobs/Orders"})]}),(0,l.jsxs)("div",{className:"bg-walnut/60 rounded-xl p-6 shadow flex flex-col items-center",children:[(0,l.jsx)("div",{className:"text-golden-teak text-3xl font-bold",children:t.totalAmount?"₹".concat(t.totalAmount):"-"}),(0,l.jsx)("div",{className:"text-sandalwood mt-2",children:"Total Revenue"})]}),(0,l.jsxs)("div",{className:"bg-walnut/60 rounded-xl p-6 shadow flex flex-col items-center",children:[(0,l.jsx)("div",{className:"text-golden-teak text-3xl font-bold",children:t.totalAdvance?"₹".concat(t.totalAdvance):"-"}),(0,l.jsx)("div",{className:"text-sandalwood mt-2",children:"Advances"})]}),(0,l.jsxs)("div",{className:"bg-walnut/60 rounded-xl p-6 shadow flex flex-col items-center",children:[(0,l.jsx)("div",{className:"text-golden-teak text-3xl font-bold",children:t.totalBalance?"₹".concat(t.totalBalance):"-"}),(0,l.jsx)("div",{className:"text-sandalwood mt-2",children:"Outstanding"})]})]}),(0,l.jsxs)("div",{className:"flex gap-4 flex-wrap mb-4",children:[(0,l.jsx)(h.Button,{variant:"golden",onClick:()=>{var e;return null===(e=document.querySelector('[aria-label="Clients"]'))||void 0===e?void 0:e.scrollIntoView()},children:"Manage Clients"}),(0,l.jsx)(h.Button,{variant:"golden",onClick:()=>{var e;return null===(e=document.querySelector('[aria-label="Orders & Quotes"]'))||void 0===e?void 0:e.scrollIntoView()},children:"Orders & Quotes"}),(0,l.jsx)(h.Button,{variant:"golden",onClick:()=>{var e;return null===(e=document.querySelector('[aria-label="Projects"]'))||void 0===e?void 0:e.scrollIntoView()},children:"Projects"}),(0,l.jsx)(h.Button,{variant:"golden",onClick:()=>{var e;return null===(e=document.querySelector('[aria-label="Gallery Manager"]'))||void 0===e?void 0:e.scrollIntoView()},children:"Gallery"})]}),(0,l.jsx)("div",{className:"text-sandalwood",children:"Jump to any section above, or use the sidebar for advanced management and search."})]})}I.displayName=k.VY.displayName;var M=function(){let{data:e}=(0,n.useSession)(),[t,a]=(0,s.useState)("dashboard"),[p,b]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[j,y]=(0,s.useState)(null),N=async e=>{e.preventDefault();let t=await (0,n.signIn)("credentials",{email:p,password:f,redirect:!1});!t||t.error?y("Invalid email or password"):y(null)};return e?(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(v,{activeTab:t,setActiveTab:a}),(0,l.jsxs)("main",{className:"flex-1 p-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-walnut mb-6",children:"Admin Panel"}),(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsxs)(A,{value:t,onValueChange:a,className:"w-full",children:[(0,l.jsxs)(_,{className:"grid w-full grid-cols-4",children:[(0,l.jsxs)(D,{value:"dashboard","aria-label":"Dashboard",children:[(0,l.jsx)(r.Z,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),(0,l.jsxs)(D,{value:"clients","aria-label":"Clients",children:[(0,l.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Clients"]}),(0,l.jsxs)(D,{value:"orders","aria-label":"Orders & Quotes",children:[(0,l.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Orders & Quotes"]}),(0,l.jsxs)(D,{value:"projects","aria-label":"Projects",children:[(0,l.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Projects"]}),(0,l.jsxs)(D,{value:"services","aria-label":"Service Master List",children:[(0,l.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Services"]}),(0,l.jsxs)(D,{value:"payments","aria-label":"All Payments",children:[(0,l.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Payments"]}),(0,l.jsxs)(D,{value:"settings","aria-label":"Admin Settings",children:[(0,l.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,l.jsxs)(D,{value:"gallery","aria-label":"Gallery Manager",children:[(0,l.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Gallery"]})]}),(0,l.jsx)(I,{value:"dashboard",children:(0,l.jsx)(q,{})}),(0,l.jsx)(I,{value:"clients",children:(0,l.jsx)(O,{})}),(0,l.jsx)(I,{value:"orders",children:(0,l.jsx)(T,{})}),(0,l.jsx)(I,{value:"projects",children:(0,l.jsx)(J,{})}),(0,l.jsx)(I,{value:"services",children:(0,l.jsx)(L,{})}),(0,l.jsx)(I,{value:"payments",children:(0,l.jsx)(V,{})}),(0,l.jsx)(I,{value:"settings",children:(0,l.jsx)(Z,{})}),(0,l.jsx)(I,{value:"gallery",children:(0,l.jsx)(z,{})})]})})]})]}):(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-walnut",children:(0,l.jsxs)("div",{className:"bg-walnut/90 text-gold-leaf shadow-2xl rounded-2xl border border-walnut/40 p-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-walnut",children:"Admin Login"}),(0,l.jsx)("p",{className:"text-walnut mb-4",children:"Sign in with your admin email and password."}),(0,l.jsxs)("form",{className:"space-y-4",onSubmit:N,children:[(0,l.jsx)("input",{type:"email",value:p,onChange:e=>b(e.target.value),placeholder:"Email",className:"border rounded p-2 w-full text-walnut",required:!0}),(0,l.jsx)("input",{type:"password",value:f,onChange:e=>g(e.target.value),placeholder:"Password",className:"border rounded p-2 w-full text-walnut",required:!0}),j&&(0,l.jsx)("div",{className:"text-red-600 text-sm",children:j}),(0,l.jsx)(h.Button,{type:"submit",className:"w-full",children:"Sign in"})]})]})})}}},function(e){e.O(0,[569,605,636,831,971,117,744],function(){return e(e.s=892)}),_N_E=e.O()}]);